{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nimport BASE_URL from '../../Config/apii';\nexport const mobileLogin = createAsyncThunk('Useraccount/mobileLogin', async (body, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  try {\n    const response = await fetch(`${BASE_URL}auth`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    if (!response.ok) {\n      throw new Error('Failed to send OTP');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const sendOtp = createAsyncThunk('user/sendOtp', async (body, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  try {\n    const response = await fetch(`${BASE_URL}Useraccount/sendotp`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    if (!response.ok) {\n      throw new Error('Failed to send OTP');\n    }\n    const data = await response.json();\n    return {\n      mobile: body.number,\n      otp: body.otp\n    };\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    user: [],\n    otp: \"1111\",\n    mobile: \"\",\n    isLoading: false,\n    error: null,\n    UserId: \"\"\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(mobileLogin.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(mobileLogin.fulfilled, (state, action) => {\n      localStorage.setItem('UserId', action.payload.data.UserId);\n      localStorage.setItem('UserName', action.payload.data.UserName);\n      state.user = action.payload.data;\n      state.UserId = action.payload.data.UserId;\n      state.isLoading = false;\n      state.error = null;\n    }).addCase(mobileLogin.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    }).addCase(sendOtp.fulfilled, (state, action) => {\n      state.mobile = action.payload.mobile;\n      state.otp = action.payload.otp;\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport default userSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createApi","fetchBaseQuery","BASE_URL","mobileLogin","body","_ref","rejectWithValue","response","fetch","method","headers","JSON","stringify","ok","Error","data","json","error","message","sendOtp","_ref2","mobile","number","otp","userSlice","name","initialState","user","isLoading","UserId","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","localStorage","setItem","payload","UserName","rejected","reducer"],"sources":["D:/react/website/finalcode/src/Redux/Slice/userSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n\r\nimport BASE_URL from '../../Config/apii';\r\n\r\nexport const mobileLogin = createAsyncThunk(\r\n  'Useraccount/mobileLogin',\r\n async (body, { rejectWithValue }) => {\r\n    try {\r\n    \r\n      const response = await fetch(`${BASE_URL}auth`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(body),\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to send OTP');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const sendOtp = createAsyncThunk(\r\n  'user/sendOtp',\r\n  async (body, { rejectWithValue }) => {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}Useraccount/sendotp`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to send OTP');\r\n      }\r\n\r\n      const data = await response.json();\r\n      return {\r\n        mobile: body.number,\r\n        otp: body.otp,\r\n      };\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\n\r\n\r\nconst userSlice = createSlice({\r\n  name: 'user',\r\n  initialState: {\r\n    user: [],\r\n    otp:\"1111\",\r\n    mobile:\"\",\r\n    isLoading: false,\r\n    error: null,\r\n    UserId:\"\",\r\n  },\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(mobileLogin.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(mobileLogin.fulfilled, (state, action) => {\r\n        localStorage.setItem('UserId', action.payload.data.UserId);\r\n     localStorage.setItem('UserName', action.payload.data.UserName);\r\n        state.user = action.payload.data;\r\n        state.UserId=action.payload.data.UserId;\r\n        state.isLoading = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(mobileLogin.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(sendOtp.fulfilled, (state, action) => {\r\n        state.mobile = action.payload.mobile;\r\n        state.otp = action.payload.otp;\r\n        state.isLoading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\n\r\nexport default userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}